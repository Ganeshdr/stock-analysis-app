(this["webpackJsonptrading-app"]=this["webpackJsonptrading-app"]||[]).push([[0],{28:function(e,t){},31:function(e,t,a){e.exports=a(71)},36:function(e,t,a){},58:function(e,t){},59:function(e,t){},60:function(e,t,a){},61:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),o=a(29),c=a.n(o),s=(a(36),a(6)),l=a(0),r=a(3),d=a(9),u=a(2),h=a(1),p=a(30),m=a.n(p),f=a(10),v=a.n(f),y=a(12),g=a.n(y);n.Component;function k(e,t){return new Promise((function(a,n){var i=new FileReader,o=!!i.readAsBinaryString;i.onload=function(e){var n=e.target.result,i=g.a.read(n,{type:o?"binary":"array"}),c=i.SheetNames[0],s=i.Sheets[c],l={rows:g.a.utils.sheet_to_json(s,{header:1}),cols:function(e){for(var t=[],a=g.a.utils.decode_range(e).e.c+1,n=0;n<a;++n)t[n]={name:g.a.utils.encode_col(n),key:n};return t}(s["!ref"])};return a(l),t(null,l)},e&&o?i.readAsBinaryString(e):i.readAsArrayBuffer(e)}))}a(60),a(61);var S=function(e){return i.a.createElement("div",{className:"loader",style:e.sizeStyle})},E=a(18),b=a.n(E),O=(a(63),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={rsiValuesForStock:[],intervalForRsi:"",macdValuesForStock:[],intervalForMacd:"",displayRetryOption:!1,loadingStockDetails:!1},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.fetchRSIForStock(this.props.stock.code,"daily"),this.fetchMACDForStock(this.props.stock.code,"daily")}},{key:"refreshCharts",value:function(){this.fetchRSIForStock(this.props.stock.code,"daily"),this.fetchMACDForStock(this.props.stock.code,"daily")}},{key:"fetchRSIForStock",value:function(e,t){var a=this,n="".concat(e,".NSE"),i=["F3YMXXSSB1DWAEWU","DDLGBF7C6UW50LSR","WXFOM7UBEMRGNOD5","PSIUYE1BYNK35V7D","Q2QD7JRMPER3VOYO"],o=i[Math.floor(Math.random()*i.length)],c="https://www.alphavantage.co/query?function=RSI&symbol=".concat(n,"&interval=").concat(t,"&time_period=10&series_type=open&apikey=").concat(o);this.setState({loadingStockDetails:!0}),v.a.get(c).then((function(e){if(e.data["Technical Analysis: RSI"]){var t=Object.values(e.data["Technical Analysis: RSI"]).map((function(e){return parseFloat(e.RSI)})),n=document.getElementById("rsiChart-".concat(a.props.stock.code)).getContext("2d");new b.a(n,{type:"line",data:{labels:Object.keys(e.data["Technical Analysis: RSI"]).slice(0,10).reverse(),datasets:[{label:"RSI",data:t.slice(0,10).reverse(),borderColor:"#3e95cd",fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1}}),a.setState({rsiValuesForStock:t,displayRetryOption:!1})}else a.setState({displayRetryOption:!0})})).catch((function(e){a.setState({displayRetryOption:!0}),console.log(e)})).finally((function(){a.setState({loadingStockDetails:!1})}))}},{key:"fetchMACDForStock",value:function(e,t){var a=this,n="".concat(e,".NSE"),i=["F3YMXXSSB1DWAEWU","DDLGBF7C6UW50LSR","WXFOM7UBEMRGNOD5","PSIUYE1BYNK35V7D","Q2QD7JRMPER3VOYO"],o=i[Math.floor(Math.random()*i.length)],c="https://www.alphavantage.co/query?function=MACD&symbol=".concat(n,"&interval=").concat(t,"&series_type=open&apikey=").concat(o);this.setState({loadingStockDetails:!0}),v.a.get(c).then((function(e){if(e.data["Technical Analysis: MACD"]){var t=Object.values(e.data["Technical Analysis: MACD"]),n=t.map((function(e){return parseFloat(e.MACD)})),i=t.map((function(e){return parseFloat(e.MACD_Signal)})),o=document.getElementById("macdChart-".concat(a.props.stock.code)).getContext("2d");new b.a(o,{type:"line",data:{labels:Object.keys(e.data["Technical Analysis: MACD"]).slice(0,10).reverse(),datasets:[{label:"MACD",data:n.slice(0,10).reverse(),borderColor:"#3e95cd",fill:!1},{label:"MACD Signal",data:i.slice(0,10).reverse(),borderColor:"#8e5ea2",fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1}}),a.setState({macdValuesForStock:n,displayRetryOption:!1})}else a.setState({displayRetryOption:!0})})).catch((function(e){a.setState({displayRetryOption:!0}),console.log(e)})).finally((function(){a.setState({loadingStockDetails:!1})}))}},{key:"changeInterval",value:function(e){var t="";switch(e.target.value){case"daily":t="daily";break;case"intraday_5":t="5min";break;case"intraday_15":t="15min"}this.fetchRSIForStock(this.props.stock.code,t),this.fetchMACDForStock(this.props.stock.code,t)}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"select-dropdown"},i.a.createElement("select",{id:"interval",onChange:this.changeInterval.bind(this),defaultValue:"daily"},i.a.createElement("option",{value:"daily"},"Daily"),i.a.createElement("option",{value:"intraday_5"},"Intraday(5 min)"),i.a.createElement("option",{value:"intraday_15"},"Intraday(15 min)"))),this.state.loadingStockDetails?i.a.createElement(S,{sizeStyle:{height:"30px",width:"30px",marginLeft:"40%",marginTop:"20px"}}):null,this.state.displayRetryOption&&!this.state.loadingStockDetails?i.a.createElement("div",null,i.a.createElement("div",{style:{color:"red"}},"Couldn't retrieve latest data. Refresh the page again after 1 minute"),i.a.createElement("div",null,i.a.createElement("button",{className:"button",onClick:this.refreshCharts.bind(this)},"Refresh"))):null,i.a.createElement("div",{className:"charts"},i.a.createElement("div",{className:"rsi-chart-".concat(this.props.stock.code),style:{height:"300px",width:"300px"}},i.a.createElement("canvas",{id:"rsiChart-".concat(this.props.stock.code)})),i.a.createElement("div",{className:"macd-chart-".concat(this.props.stock.code),style:{height:"300px",width:"300px"}},i.a.createElement("canvas",{id:"macdChart-".concat(this.props.stock.code)}))))}}]),a}(n.Component)),D=(a(64),a(8).bullish),C=a(8).bearishengulfingpattern,I=a(8).bullishengulfingpattern,N=a(8).doji,w=a(8).bullishharami,R=a(8).bearishharami,F=a(8).eveningstar,M=a(8).morningstar,j=a(8).threewhitesoldiers,T=a(8).threeblackcrows,A=a(8).shootingstar,_=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={technicalPatterns:{},displayRetryOption:!1,loadingStockDetails:!1},n.fetchTradingDataForStock=n.fetchTradingDataForStock.bind(Object(d.a)(n)),n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.fetchTradingDataForStock(this.props.stock.code,"daily")}},{key:"fetchTradingDataForStock",value:function(e,t){var a=this;console.log("fetchTradingDataForStock",e,t);var n,i="".concat(e,".NSE"),o=["F41ON15LGCFM4PR7","SYTCQBUIU44BX2G4","50M3AP1K3Y","RNZPXZ6Q9FEFMEHM","VZLZ58FTEXZW7QZ6"],c=o[Math.floor(Math.random()*o.length)];switch(t){case"daily":n="https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&&symbol=".concat(i,"&outputsize=compact&apikey=").concat(c);break;case"intraday_5":n="https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&&symbol=".concat(i,"&interval=5min&outputsize=compact&apikey=").concat(c);break;case"intraday_15":n="https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&&symbol=".concat(i,"&interval=15min&outputsize=compact&apikey=").concat(c)}this.setState({loadingStockDetails:!0}),v.a.get(n).then((function(e){var t=e.data["Meta Data"]&&Object.keys(e.data)[1].startsWith("Time Series")?Object.keys(e.data)[1]:null;if(t){var n=Object(s.a)(Object.values(e.data[t])),i=n.map((function(e){return parseFloat(e["1. open"])})).slice(0,2).reverse(),o=n.map((function(e){return parseFloat(e["2. high"])})).slice(0,2).reverse(),c=n.map((function(e){return parseFloat(e["3. low"])})).slice(0,2).reverse(),l=n.map((function(e){return parseFloat(e["4. close"])})).slice(0,2).reverse(),r={open:i,high:o,low:c,close:l},d={open:n.map((function(e){return parseFloat(e["1. open"])})).slice(0,3).reverse(),high:n.map((function(e){return parseFloat(e["2. high"])})).slice(0,3).reverse(),low:n.map((function(e){return parseFloat(e["3. low"])})).slice(0,3).reverse(),close:n.map((function(e){return parseFloat(e["4. close"])})).slice(0,3).reverse()};console.log("inputValues",r,d,C(r),I(r)),a.setState({technicalPatterns:{"Is Bearish engulfing pattern formed":C(r),"Is Bullish engulfing pattern formed":I(r),"Is Doji formed":N({open:i[i.length-1],high:o[o.length-1],low:c[c.length-1],close:l[l.length-1]}),"Is Bearish harami pattern formed":R(r),"Is Bullish harami pattern formed":w(r),"Is Evening Star formed":F(d),"Is Morning Star formed":M(d),"Is Three Black Crows pattern formed":T(d),"Is Three White Soldiers pattern formed":j(d),"Is Shooting Star pattern formed":A(d),Overall:D(r)},displayRetryOption:!1}),console.log("this.state.technicalPatterns",a.state.technicalPatterns)}else a.setState({displayRetryOption:!0})})).catch((function(e){console.log(e),a.setState({displayRetryOption:!0})})).finally((function(){a.setState({loadingStockDetails:!1})}))}},{key:"changeInterval",value:function(e){this.fetchTradingDataForStock(this.props.stock.code,e.target.value)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("div",{className:"select-dropdown"},i.a.createElement("select",{id:"interval",onChange:this.changeInterval.bind(this),defaultValue:"daily"},i.a.createElement("option",{value:"daily"},"Daily"),i.a.createElement("option",{value:"intraday_5"},"Intraday(5 min)"),i.a.createElement("option",{value:"intraday_15"},"Intraday(15 min)")),i.a.createElement("p",null),i.a.createElement("p",null,this.state.value)),this.state.displayRetryOption&&!this.state.loadingStockDetails?i.a.createElement("div",null,i.a.createElement("div",{style:{color:"red"}},"Couldn't retrieve latest data. Refresh the page again after 1 minute"),i.a.createElement("div",null,i.a.createElement("button",{className:"button",onClick:function(){return e.fetchTradingDataForStock(e.props.stock.code,"daily")}},"Refresh"))):null,this.state.loadingStockDetails?i.a.createElement(S,{sizeStyle:{height:"30px",width:"30px",marginLeft:"40%",marginTop:"20px"}}):i.a.createElement("div",null,this.state.technicalPatterns&&Object.keys(this.state.technicalPatterns).length?Object.keys(this.state.technicalPatterns).map((function(t,a){return i.a.createElement("div",{key:a},t," : ",e.state.technicalPatterns[t]?"Yes":"No")})):null))}}]),a}(n.Component),B=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={stockDetails:{},displayRetryOption:!1,loadingStockDetails:!1},n.openTab=n.openTab.bind(Object(d.a)(n)),n.fetchStockDetails=n.fetchStockDetails.bind(Object(d.a)(n)),n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.fetchStockDetails(this.props.item.code),document.getElementById("defaultOpen-".concat(this.props.item.code)).click()}},{key:"openTab",value:function(e,t){var a,n,i;for(n=document.getElementsByClassName("tabcontent-".concat(this.props.item.code)),a=0;a<n.length;a++)n[a].style.display="none";for(i=document.getElementsByClassName("tablinks-".concat(this.props.item.code)),a=0;a<i.length;a++)i[a].className=i[a].className.replace(" active","");document.getElementById(t).style.display="block",e.currentTarget.className+=" active"}},{key:"fetchStockDetails",value:function(e){var t=this,a="".concat(e,".NSE"),n=["E3JQ79Z8TOZDXQ9O","1MZEAXT6B2B52KXY","M8MTQHK38J65US1E","CDYFPHQYOGVYKYFL","TM6O1OH9WQIT6LIV"],i=n[Math.floor(Math.random()*n.length)],o="https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=".concat(a,"&apikey=").concat(i);this.setState({loadingStockDetails:!0}),v.a.get(o).then((function(e){e.data["Global Quote"]?t.setState({stockDetails:e.data["Global Quote"],displayRetryOption:!1}):t.setState({displayRetryOption:!0})})).catch((function(e){console.log(e),t.setState({displayRetryOption:!0})})).finally((function(){t.setState({loadingStockDetails:!1})}))}},{key:"render",value:function(){var e=this,t=this.state.stockDetails;return i.a.createElement("div",{className:"stock-details"},i.a.createElement("div",null,i.a.createElement("div",{className:"title"},this.props.item.name),i.a.createElement("div",{className:"tab"},i.a.createElement("button",{className:"tablinks-".concat(this.props.item.code),onClick:function(t){return e.openTab(t,"latest-".concat(e.props.item.code))},id:"defaultOpen-".concat(this.props.item.code)},"Latest Data"),i.a.createElement("button",{className:"tablinks-".concat(this.props.item.code),onClick:function(t){return e.openTab(t,"historical-".concat(e.props.item.code))}},"Historical"),i.a.createElement("button",{className:"tablinks-".concat(this.props.item.code),onClick:function(t){return e.openTab(t,"technical-".concat(e.props.item.code))}},"Technical Indicators")),this.state.displayRetryOption&&!this.state.loadingStockDetails?i.a.createElement("div",null,i.a.createElement("div",{style:{color:"red"}},"Couldn't retrieve latest data. Refresh the page again after 1 minute"),i.a.createElement("div",null,i.a.createElement("button",{className:"button",onClick:function(){return e.fetchStockDetails(e.props.item.code)}},"Refresh"))):null,this.state.loadingStockDetails?i.a.createElement(S,{sizeStyle:{height:"30px",width:"30px",marginLeft:"40%"}}):i.a.createElement("div",{id:"latest-".concat(this.props.item.code),className:"tabcontent-".concat(this.props.item.code," details")},t&&Object.keys(t).length?Object.keys(t).map((function(e,a){return i.a.createElement("div",{key:a},e," : ",t[e])})):null),i.a.createElement("div",{id:"historical-".concat(this.props.item.code),className:"tabcontent-".concat(this.props.item.code," details")},i.a.createElement(O,{stock:this.props.item})),i.a.createElement("div",{id:"technical-".concat(this.props.item.code),className:"tabcontent-".concat(this.props.item.code," details")},i.a.createElement(_,{stock:this.props.item}))))}}]),a}(n.Component),x=(a(66),function(e){var t=e.stockItems.map((function(e,t){return i.a.createElement(B,{key:t,item:e})}));return i.a.createElement("div",{className:"StockList"},t)});a(67);var P=function(e){return i.a.createElement("div",{className:"filter_stocks"},i.a.createElement("div",{className:"label",style:{paddingLeft:"10px"}},"Filter the stocks based on these parameters: "),i.a.createElement("div",{className:"filters"},e.filterParams.map((function(t,a){return i.a.createElement("div",{className:"FilterParams",key:a},t,": ",i.a.createElement("input",{type:"number",onChange:function(a){return e.filterValues(a.target.value,"min",t)}})," - ",i.a.createElement("input",{type:"number",onChange:function(a){return e.filterValues(a.target.value,"max",t)}}))}))))};a(68);var L=function(e){return i.a.createElement("div",{className:"ImportFile"},i.a.createElement("div",{className:"header optional"},"OR"),i.a.createElement("div",{className:"header"},"You could even import .xlsx file to add the stocks in the search bar!(up to 5 stocks can be filtered at a time)"),i.a.createElement("input",{type:"file",onChange:e.onChange,onClick:e.onClick,style:{padding:"10px"}}),e.totalEntriesInfile.length?i.a.createElement("div",{className:"total_entries"},e.totalEntriesInfile.length-1," entries found in the file"):"",e.totalEntriesInfile.length?i.a.createElement(P,{filterParams:["Market Capitalization","Return on equity","Price to Earning","Pledged percentage","PEG Ratio","Price to book value","Debt to equity"],filterValues:e.filterValues}):"")},V=(a(69),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).removeTag=function(e,t){var a=Object(s.a)(n.state.tags);a.splice(t,1),n.setState({tags:a}),n.props.onRemove(e)},n.inputKeyDown=function(e,t){e.code=e.code.split(".")[0].toString(),n.props.onSelect(e,t),n.state.tags.find((function(t){return t.code.toLowerCase()===e.code.toLowerCase()}))||(n.setState({tags:[].concat(Object(s.a)(n.state.tags),[e])}),n.tagInput.value=null)},n.state={tags:[]},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.setState({tags:this.props.entries})}},{key:"componentDidUpdate",value:function(e,t,a){e.entries.length!==this.props.entries.length&&this.setState({tags:Object(s.a)(new Set([].concat(Object(s.a)(this.state.tags),Object(s.a)(this.props.entries))))})}},{key:"render",value:function(){var e=this,t=this.state.tags,a=this.props.predictions;return i.a.createElement("div",null,i.a.createElement("div",{className:"input-tag"},i.a.createElement("ul",{className:"input-tag__tags"},t.map((function(t,a){return i.a.createElement("li",{key:a},t.code,i.a.createElement("button",{type:"button",onClick:function(){e.removeTag(t,a)}},"+"))})),i.a.createElement("li",{className:"input-tag__tags__input"},i.a.createElement("input",{type:"text",onChange:this.props.onChange,placeholder:"Enter proper NSE code for your stock",ref:function(t){e.tagInput=t}})))),i.a.createElement("div",{className:"SearchBar__Predictions"},i.a.createElement("div",null,this.props.value.length>1&&a&&a.length?a.map((function(t,a){return i.a.createElement("div",{key:a,className:"prediction",onClick:function(a){return e.inputKeyDown(t,a)}},t.code," : ",t.name)})):i.a.createElement("div",null,this.props.value.length>1&&!this.props.isDataFetched&&a&&!a.length?i.a.createElement("div",{className:"prediction"},i.a.createElement(S,{sizeStyle:{height:"12px",width:"12px",marginLeft:"40%"}})):null)),i.a.createElement("div",{className:"error"},this.props.value.length>1&&this.props.isDataFetched&&a&&!a.length?"No stock found with such keywords":null)))}}]),a}(n.Component)),Y=(a(70),{}),Q=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={predictions:[],stocks:[],value:"",dataFetched:!1,totalEntriesInfile:[],filters:{},selectedStocks:[]},e.handleChange=e.handleChange.bind(Object(d.a)(e)),e.onSelectStock=e.onSelectStock.bind(Object(d.a)(e)),e}return Object(r.a)(a,[{key:"handleChange",value:function(e){var t=this;clearTimeout(this.timeout);var a=e.target.value;this.setState({value:a}),a.length>1?this.timeout=setTimeout((function(){t.fetchAllPredictions(a)}),600):this.setState({predictions:[]})}},{key:"fetchAllPredictions",value:function(e){var t=this,a="".concat(e,".NSE"),n=["5VDBWLCQX19QLOHA","BYCL2VV943GO0OYJ","2H21XW7C06ZD97VM","U9QP95JKNBLAGPS1","ULJDF26QPKN97Z44"],i=n[Math.floor(Math.random()*n.length)],o="https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=".concat(a,"&apikey=").concat(i);this.setState({dataFetched:!1}),v.a.get(o).then((function(e){var a=m.a.flattenDeep(Array.from(e.data.bestMatches).map((function(e){return[{code:e["1. symbol"],name:e["2. name"]}]})));t.setState({predictions:a})})).catch((function(e){return console.log(e)})).finally((function(){return t.setState({dataFetched:!0})}))}},{key:"onSelectStock",value:function(e,t){e.code=e.code.split(".")[0].toString(),this.setState({value:"",predictions:[],selectedStocks:[].concat(Object(s.a)(this.state.selectedStocks),[e])}),t.preventDefault()}},{key:"onRemoveStock",value:function(e,t){var a=e.code.split(".")[0].toString(),n=this.state.selectedStocks.filter((function(e){return e.code!==a}));this.setState({selectedStocks:n})}},{key:"filterValues",value:function(e,t,a){Y[a]||(Y[a]={}),Y[a][t]=e,Y[a].min||Y[a].max||delete Y[a];var n=this.state.totalEntriesInfile[0],i=n.indexOf("NSE Code"),o=n.indexOf("Name"),c=Object(s.a)(this.state.totalEntriesInfile.slice(0,this.state.totalEntriesInfile.length)).filter((function(e){return Object.keys(Y).every((function(t){return Y[t].min&&Y[t].max&&e[n.indexOf(t)]>=Number(Y[t].min)&&e[n.indexOf(t)]<=Number(Y[t].max)}))}));c=c.slice(0,5);var l=Object(s.a)(c.map((function(e){return{code:e[i],name:e[o]}})));this.setState({selectedStocks:l})}},{key:"fileHandler",value:function(e){if(e.target.files.length){var t=e.target.files[0],a=t.name;"xlsx"===a.slice(a.lastIndexOf(".")+1)&&this.renderFile(t)}}},{key:"renderFile",value:function(e){var t=this;k(e,(function(e,a){e?console.log(e):t.setState({totalEntriesInfile:a.rows})}))}},{key:"render",value:function(){var e=this.state.value;return i.a.createElement("div",{className:"App"},i.a.createElement("h1",{className:"App__Title"},"Stock Search"),i.a.createElement(V,{entries:this.state.selectedStocks,value:e,onChange:this.handleChange,onClick:this.handleClick,isDataFetched:this.state.dataFetched,predictions:this.state.predictions,onSelect:this.onSelectStock,onRemove:this.onRemoveStock.bind(this)}),i.a.createElement(L,{onChange:this.fileHandler.bind(this),onClick:function(e){e.target.value=null},totalEntriesInfile:this.state.totalEntriesInfile,filterValues:this.filterValues.bind(this)}),i.a.createElement(x,{stockItems:this.state.selectedStocks}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.a991bbed.chunk.js.map